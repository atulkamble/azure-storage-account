# ğŸ”‘ Azure Storage Account Keys & Azure Table Storage

**Complete Beginner-Friendly Documentation**

![Image](https://learn.microsoft.com/en-us/azure/storage/common/media/storage-account-keys-manage/portal-key-expiration-policy.png)

![Image](https://learn.microsoft.com/en-us/azure/key-vault/media/secrets/rotation-dual/rotation-diagram.png)

![Image](https://learn.microsoft.com/en-us/azure/storage/common/media/customer-managed-keys-overview/encryption-customer-managed-keys-diagram.png)

---

## ğŸ”¹ What is a Storage Account Key?

A **Storage Account Key** is a **secret credential** generated by **Microsoft Azure** that provides **full access** to all services inside a Storage Account:

* Blob Storage
* File Storage
* Queue Storage
* Table Storage

ğŸ“Œ Think of it as a **root password** for the storage account.

---

## ğŸ”‘ Where Do You Get the Storage Account Key?

You get it from the **Azure Portal** under your **Storage Account**.

---

## ğŸªœ Step-by-Step (Azure Portal)

1. Login to **Azure Portal**
2. Open **Storage Accounts**
3. Select your **Storage Account**
4. Left menu â†’ **Security + networking**
5. Click **Access keys**
6. Copy **Key1** or **Key2**

âœ… Either key works
âœ… Two keys are provided for **zero-downtime rotation**

---

## ğŸ“Œ What Youâ€™ll See in Access Keys

| Field                | Usage                    |
| -------------------- | ------------------------ |
| Storage account name | `AZURE_STORAGE_ACCOUNT`  |
| Key1                 | Primary access key       |
| Key2                 | Secondary key (rotation) |

---

## ğŸ§ª Example â€“ Using Key in CLI

```bash
export AZURE_STORAGE_ACCOUNT=mystorageaccount
export AZURE_STORAGE_KEY=<PASTE_KEY_HERE>
```

---

## ğŸ” Secure Alternative (Recommended for Production)

Instead of keys, use **Azure AD authentication**.

```bash
az login
az storage table create \
  --name demoTable \
  --auth-mode login
```

ğŸ“Œ Requirements:

* Role: **Storage Table Data Contributor**
* Azure AD enabled

---

## ğŸ§  Interview Q&A (Very Important)

**Q: Where are storage account keys stored?**
âœ… Storage Account â†’ Access keys

**Q: Why are there two keys?**
âœ… Key rotation without downtime

**Q: Are keys secure?**
âŒ No â€“ full admin access
âœ… Prefer Azure AD / Managed Identity

---

## âš ï¸ Security Best Practices

âŒ Never commit keys to GitHub
âŒ Never hardcode keys in code
âœ… Rotate keys periodically
âœ… Use Managed Identity in production

---

## âœ… Storage Access Summary

| Method | Location                       |
| ------ | ------------------------------ |
| Portal | Storage Account â†’ Access keys  |
| CLI    | `az storage account keys list` |
| Secure | Azure AD / Managed Identity    |

---

---

# ğŸ”¹ Azure Table Storage â€“ Basic & Clear Documentation

![Image](https://learn.microsoft.com/en-us/azure/storage/tables/media/storage-table-design-guide/storage-table-design-image12.png)

![Image](https://learn.microsoft.com/en-us/rest/api/storageservices/media/azu_ch03_figure1.png)

![Image](https://learn.microsoft.com/en-us/azure/storage/tables/media/storage-table-design-guide/storage-table-design-image05.png)

---

## ğŸ“Œ What is Azure Table Storage?

Azure Table Storage is a **NoSQL key-value storage service** designed for:

* Massive scale
* Fast lookups
* Schema-less data

ğŸ“¦ Best for:

* User profiles
* Metadata
* Device telemetry
* Configuration data

---

## ğŸ§± Core Concepts (Must Know)

| Term         | Meaning                |
| ------------ | ---------------------- |
| Table        | Collection of entities |
| Entity       | One row                |
| Property     | Column                 |
| PartitionKey | Data grouping          |
| RowKey       | Unique ID              |

ğŸ”‘ **PartitionKey + RowKey = Primary Key**

---

## âš™ï¸ Authentication (Basic)

```bash
export AZURE_STORAGE_ACCOUNT=mystorage
export AZURE_STORAGE_KEY=<key>
```

---

## ğŸ§ª Azure CLI â€“ BASIC Commands

### 1ï¸âƒ£ Create Table

```bash
az storage table create \
  --name demoTable \
  --account-name $AZURE_STORAGE_ACCOUNT \
  --account-key $AZURE_STORAGE_KEY
```

---

### 2ï¸âƒ£ Insert Entity

```bash
az storage entity insert \
  --table-name demoTable \
  --entity PartitionKey=Users RowKey=1 Name=Atul City=Pune \
  --account-name $AZURE_STORAGE_ACCOUNT \
  --account-key $AZURE_STORAGE_KEY
```

---

### 3ï¸âƒ£ Query Entities

```bash
az storage entity query \
  --table-name demoTable \
  --account-name $AZURE_STORAGE_ACCOUNT \
  --account-key $AZURE_STORAGE_KEY
```

---

### 4ï¸âƒ£ Update Entity

```bash
az storage entity merge \
  --table-name demoTable \
  --entity PartitionKey=Users RowKey=1 City=Mumbai \
  --account-name $AZURE_STORAGE_ACCOUNT \
  --account-key $AZURE_STORAGE_KEY
```

---

### 5ï¸âƒ£ Delete Entity

```bash
az storage entity delete \
  --table-name demoTable \
  --partition-key Users \
  --row-key 1 \
  --account-name $AZURE_STORAGE_ACCOUNT \
  --account-key $AZURE_STORAGE_KEY
```

---

### 6ï¸âƒ£ Delete Table

```bash
az storage table delete \
  --name demoTable \
  --account-name $AZURE_STORAGE_ACCOUNT \
  --account-key $AZURE_STORAGE_KEY
```

---

## âš¡ PowerShell â€“ Basic

### Create Context

```powershell
$ctx = New-AzStorageContext `
  -StorageAccountName "mystorage" `
  -StorageAccountKey "<key>"
```

---

### Create Table

```powershell
New-AzStorageTable -Name "demoTable" -Context $ctx
```

---

### Insert Entity

```powershell
Add-AzTableRow `
  -Table "demoTable" `
  -PartitionKey "Users" `
  -RowKey "1" `
  -Property @{ Name="Atul"; City="Pune" } `
  -Context $ctx
```

---

## âš¡ .NET SDK (Minimal C#)

```csharp
using Azure.Data.Tables;

var client = new TableClient("<connection_string>", "demoTable");

var entity = new TableEntity("Users", "1")
{
    ["Name"] = "Atul",
    ["City"] = "Pune"
};

client.AddEntity(entity);
client.DeleteEntity("Users", "1");
```

---

## ğŸ–¥ï¸ GUI Option â€“ Azure Storage Explorer

* Open **Azure Storage Explorer**
* Storage Account â†’ Tables
* Insert / Edit / Delete entities visually

(No code required)

---

## âš ï¸ Rules to Remember (Interview Gold)

* No joins (NoSQL)
* PartitionKey affects performance
* Entity max size = **1 MB**
* Schema-less design

---

## ğŸ¯ Exam Tips (AZ-900 / AZ-104)

| Requirement    | Service       |
| -------------- | ------------- |
| Key-Value data | Table Storage |
| Messages       | Queue Storage |
| Files          | File Storage  |
| Objects        | Blob Storage  |

---

## âœ… Why This Documentation Works

âœ” Beginner friendly
âœ” Classroom ready
âœ” Interview focused
âœ” Minimal commands
âœ” Production best practices
